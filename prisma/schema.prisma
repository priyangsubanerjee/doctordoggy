// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

model File {
  id        String   @id @default(auto()) @map("_id") @db.ObjectId
  name      String
  publicId  String
  url       String   @unique
  createdAt DateTime @default(now())
}

model User {
  id            String         @id @default(auto()) @map("_id") @db.ObjectId
  email         String         @unique
  name          String
  phone         String?
  zipCode       String?
  address       String?
  createdAt     DateTime       @default(now())
  pets          Pet[]
  vaccines      Vaccination[]
  prescriptions Prescription[]
    dewormings    Deworming[]
}

model Pet {
  id            String         @id @default(auto()) @map("_id") @db.ObjectId
  image         String
  name          String
  sex           String?
  bodyWeight    String?
  Parent        User?          @relation(fields: [parentEmail], references: [email])
  parentEmail   String?
  breed         String
  dateOfBirth   DateTime
  color         String?
  species       String
  createdBy     String?
  createdAt     DateTime       @default(now())
  isPublic      Boolean        @default(true)
  vaccines      Vaccination[]
  prescriptions Prescription[]
    dewormings    Deworming[]
}

model Vaccination {
  id               String    @id @default(auto()) @map("_id") @db.ObjectId
  name             String
  image            String
  pet              Pet       @relation(fields: [petId], references: [id])
  petId            String    @db.ObjectId
  Parent           User?     @relation(fields: [parentEmail], references: [email])
  parentEmail      String?
  vaccineName      String
  bodyWeight       String?
  bodyTemperature  String?
  files            String[]
  notes            String?
  status           String?
  dueDate          DateTime
  doneDate         DateTime?
  doneAt           String?
  doneBy           String?
  doctorsSignature String?
  createdAt        DateTime  @default(now())
}

model Prescription {
  id            String   @id @default(auto()) @map("_id") @db.ObjectId
  image         String?
  name          String?
  pet           Pet      @relation(fields: [petId], references: [id])
  petId         String   @db.ObjectId
  Parent        User?    @relation(fields: [parentEmail], references: [email])
  parentEmail   String?
  reasonOfVisit String
  dateOfVisit   DateTime
  bodyWeight    String?
  temperature   String?
  files         String[]
  notes         String?
  doctorName        String?
  doctorSignature   String?
  doctorId          String?
}


model Deworming {
    id           String   @id @default(auto()) @map("_id") @db.ObjectId
    name         String
    image        String
    pet          Pet      @relation(fields: [petId], references: [id])
    petId        String   @db.ObjectId
    Parent       User?    @relation(fields: [parentEmail], references: [email])
    parentEmail  String?
    bodyWeight   String?
    files        String[]
    medicineName String
    dosage       String
    notes        String?
    dueDate      DateTime
    doneDate     DateTime?
}